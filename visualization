import matplotlib.pyplot as plt

# Biểu đồ thanh: Xếp hạng trung bình của các ứng dụng theo thể loại
def plot_average_rating_by_genre(data):
    average_ratings = data.groupby('prime_genre')['user_rating'].mean().sort_values()
    plt.figure(figsize=(12, 6))
    average_ratings.plot(kind='bar', color='skyblue')
    plt.title('Average User Rating by App Genre')
    plt.xlabel('App Genre')
    plt.ylabel('Average User Rating')
    plt.xticks(rotation=45)
    plt.grid(axis='y', linestyle='--', alpha=0.7)
    plt.tight_layout()
    plt.show()

# Biểu đồ phân tán: Mối quan hệ giữa xếp hạng và kích thước ứng dụng
def plot_size_vs_rating(data):
    plt.figure(figsize=(10, 6))
    plt.scatter(data['size_bytes'], data['user_rating'], alpha=0.5, color='green')
    plt.title('App Size vs. User Rating')
    plt.xlabel('Size (bytes)')
    plt.ylabel('User Rating')
    plt.grid(True, linestyle='--', alpha=0.7)
    plt.show()

# Biểu đồ tròn: Tỷ lệ các ứng dụng miễn phí so với trả phí
def plot_free_vs_paid(data):
    data['is_free'] = data['price'] == 0
    free_paid_counts = data['is_free'].value_counts()
    plt.figure(figsize=(8, 8))
    plt.pie(free_paid_counts, labels=['Free', 'Paid'], autopct='%1.1f%%', startangle=90, colors=['#ff9999','#66b3ff'])
    plt.title('Percentage of Free vs Paid Apps')
    plt.show()
